import java.util.*;

/*
 * public class TreeNode {
 *   int val = 0;
 *   TreeNode left = null;
 *   TreeNode right = null;
 *   public TreeNode(int val) {
 *     this.val = val;
 *   }
 * }
 */

public class Solution {
    /**
     * 代码中的类名、方法名、参数名已经指定，请勿修改，直接返回方法规定的值即可
     *
     * 
     * @param root TreeNode类 
     * @param p int整型 
     * @param q int整型 
     * @return int整型
     */

     public ArrayList<Integer> path(TreeNode root,int target){
        ArrayList<Integer> list=new ArrayList<Integer>();
        TreeNode node=root;
        while(node.val!=target){
            list.add(node.val);
            if(node.val<target){
                node=node.right;
            }
            else{
                node=node.left;
            }
        }
            list.add(node.val);
            return list;

     }
    public int lowestCommonAncestor (TreeNode root, int p, int q) {
        // write code here

        ArrayList<Integer> path_p=path(root,p);
        ArrayList<Integer> path_q=path(root,q);
        int result=0;

        for(int i=0;i<path_p.size()&&i<path_q.size();i++){
                int x=path_p.get(i);
                int y=path_q.get(i);
                if(x==y){
                 result=path_p.get(i);
                }
        }
        return result;
    }
}
